.. highlight:: javascript

======================
Документация frontend/js/main.js
======================

Этот документ содержит обзор и документацию к файлу `main.js`_.

.. _`main.js`: https://github.com/ILarious/TEST/blob/main/frontend/js/main.js



Функция sendRequest
===================

.. code:: javascript

    function sendRequest(method, url, body = null) {
        // Создает и возвращает новый объект Promise для выполнения HTTP-запроса
        return new Promise((resolve, reject) => {
            // Создаем новый объект XMLHttpRequest
            const xhr = new XMLHttpRequest();

            // Открываем соединение с сервером и указываем метод и URL запроса
            xhr.open(method, url);

            // Устанавливаем ожидаемый формат ответа на JSON
            xhr.responseType = 'json';

            // Устанавливаем заголовок Content-Type для передачи данных в формате JSON
            xhr.setRequestHeader('Content-Type', 'application/json');

            // Обработчик события загрузки данных
            xhr.onload = () => {
                // Проверяем статус ответа сервера
                if (xhr.status >= 400) {
                    // Если статус >= 400, то отклоняем Promise с данными ответа
                    reject(xhr.response);
                } else {
                    // В противном случае разрешаем Promise с данными ответа
                    resolve(xhr.response);
                }
            }

            // Обработчик события ошибки запроса
            xhr.onerror = () => {
                // Отклоняем Promise с данными ответа
                reject(xhr.response);
            }

            // Отправляем запрос на сервер, преобразуя тело запроса в формат JSON
            xhr.send(JSON.stringify(body));
        });
    }

Описание
--------

- Функция `sendRequest` предназначена для отправки HTTP-запросов на сервер с использованием объекта XMLHttpRequest.
- Она поддерживает различные методы запросов (GET, POST, PUT, DELETE) и может отправлять данные в формате JSON.
- Функция возвращает объект Promise, который разрешается при успешном выполнении запроса и отклоняется в случае ошибки.
- При разрешении Promise возвращается ответ сервера в формате JSON.

Примечания
----------

- Для корректной работы этой функции, убедитесь, что объект XMLHttpRequest поддерживается вашим браузером и сервер, на который отправляются запросы, настроен на обработку запросов в формате JSON.
- Предоставленная функция не включает обработку авторизации или обработку запросов на уровне токенов. В реальных приложениях такие детали безопасности должны быть учтены.
